# Требования к безопасности интеграций с внешними сервисами Умного Дома

## Основные требования

1. Все процессы должны соответствовать ФЗ 152 О Персональных данных, т.к. в системе используются диометрические данные пользователей, которым предоставляется доступ к объектам недвижимости (собственники и их посетители, сотрудними обслуживающих организаций и т.д.)
2. Передавать необходимо только те данные, которые необходимы для выполнения конкретной операции. Например, для распознавания лица можно передавать т.н. дескриптор лица, а не всё фото целиком.
3. Все хранимые данные должны шифроваться при хранениии и передаваться по шифрованным каналам (TLS).
4. Рассмотреть возможность использования токенизации чтобы передавать токены вместо пользовательских данных.
5. Определить глубину хранения логов. Например, фото посетителей и номера автомобилей хранить ограниченное время (если был получен одноразовый доступ на объект).

## Сетевая безопасность

1. Все устройства умного дома должны быть выделены в отдельный сегмент сети, изолированный от основной корпоративной сети компании.
2. Настроить жесткие правила сетевого экранирования между сегментами. Должно быть запрещено всё, что явно не разрешено.
3. Между сетью партнёра и сетью умного дома установить межсетевой экран.
4. Настроить whitelisting при подключении к сервисам партнёра, чтобы никто другой не мог присоединиться кроме авторизованных систем.
5. Для обслуживания систем и управления конфигурацией устройств предоставить доступ сотрудникам только через VPN.
6. Внедрить сервисы защиты от DDoS атак чтобы система оставалась доступной для пользователей, иначе может произойти коллапс если люди не смогут зайти/выйти, вплоть до полного принудительного отключения системы, что само по себе создаёт риски безопасности собственников и их имущества.

## Требования к протоколам

1. Для пользователей использовать аутентификацию по OAuth 2.0 / Open ID Connect с JWT токенами.
2. Закрыть доступ к небезопасным протоколам (HTTP, FTP etc.)
3. Запросы от устройств должны подиписываться чтобы исключить подмену команд.

## Аутентификация, авторизация и аудит

1. Для сотрудников применять MFA при подключении к панели админстрирования
2. Доступ к конфигурированию и управлению устройствами по ролевой модели с чётким разграничением прав.
3. Для аудита должны быть настроены полные логи: кто, где, когда получил доступ к объекту.
